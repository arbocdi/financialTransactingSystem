########################################
# Producer reliability (acks)
########################################
spring.kafka.producer.acks=all
# Wait for acknowledgment from all in-sync replicas (ISR).
# Guarantees maximum durability but increases latency.
spring.kafka.producer.retries=2147483647
# Maximum number of retries for sending a record.
# Together with delivery.timeout.ms Kafka will eventually fail
# if the record cannot be delivered within the configured timeout.
########################################
# Idempotence (exactly-once semantics on producer side)
########################################
spring.kafka.producer.properties.enable.idempotence=true
# Ensures that duplicate records are not produced to Kafka.
# Must be enabled when using outbox pattern or transactional producers,
# and to guarantee safe retries.
spring.kafka.producer.properties.max.in.flight.requests.per.connection=5
# Maximum number of unacknowledged requests per connection.
# With enable.idempotence=true Kafka enforces this value
# to be <= 5 to preserve message ordering.
########################################
# Timeouts configuration
########################################
spring.kafka.producer.properties.request.timeout.ms=30000
# Maximum time the producer waits for a response from the broker.
# If exceeded, the request is considered failed and retried.
spring.kafka.producer.properties.delivery.timeout.ms=120000
# Upper bound on the total time to deliver a record (including retries).
# If exceeded, the send() operation fails.
########################################
# Performance tuning (safe defaults)
########################################
spring.kafka.producer.properties.linger.ms=5
# Time to wait before sending a batch in order to accumulate more records.
# Slightly increases latency but improves throughput.
spring.kafka.producer.properties.batch.size=65536
# Maximum batch size in bytes.
# 64KB is a reasonable default for most workloads.
spring.kafka.producer.properties.compression.type=lz4
# Compression type for producer records.
# lz4 provides a good balance between compression ratio and CPU usage.
########################################
# Serialization (JSON payloads)
########################################
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
# JSON payloads are serialized as strings, so StringSerializer is sufficient.